<div
    class=" px-10  sm:absolute sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-scroll bg-card dark:bg-transparent">

    <div class="row pt-3">
        <div class="col-lg-9 col-sm-12">
            <div class="heading">Deceased Customers</div>
        </div>
        <div class="col-lg-3 col-sm-12 self-center">
            <p class="text-right">
                <button aria-controls="collapseExample" aria-expanded="false"
                        class="mt-1  py-2 mat-focus-indicator mat-flat-button mat-button-base mat-primary"
                        color="primary" onclick="toggleCollapse()" type="button">
                    <mat-icon class="mr-2" id='arrow'>keyboard_arrow_down</mat-icon>
                    Advance Filter
                </button>
            </p>
        </div>
    </div>

    <!-- Header -->


    <div class="collapse show" id="collapseExample">
        <div class="card card-body">
            <div [formGroup]="deceasedCustomerSearch" class="kt-form kt-form-margin">
                <div>


                    <div class="flex" style="flex-wrap: wrap;">
                        <app-zone-branch-circle (branchZoneCircleData)="getAllData($event)" [form]="deceasedCustomerSearch"
                                                [show_circle]="false"></app-zone-branch-circle>
                        <div class="mx-2">
                            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0" style="width: 225px;">
                                <mat-form-field appearance="outline" class="mat-form-field-fluid w-full">
                                    <mat-label>Cnic</mat-label>
                                    <input appNumberOnly autocomplete="off" formControlName="Cnic" matInput maxlength="13"
                                           placeholder="">
                                    <!-- <mat-error *ngIf="hasError('Cnic', 'pattern')">Cnic should only contain numberic values <strong>required</strong></mat-error> -->
                                    <!-- <mat-error *ngIf="deceasedCustomerSearch.get('Cnic').hasError('required')">
                                    First Name is Required!
                                  </mat-error>
                                  -->
                                    <!-- <mat-error *ngIf="deceasedCustomerSearch.get('Cnic').hasError('minlength')">
                                        CNIC should consist 13 characters
                                    </mat-error> -->
                                    <!--
                                                  <mat-error *ngIf="deceasedCustomerSearch.get('Cnic').hasError('maxlength')">
                                                    CNIC should consist 13 characters
                                                  </mat-error> -->

                                    <mat-error *ngIf="deceasedCustomerSearch.get('Cnic').hasError('pattern')">
                                        CNIC should only contain upto 13 numberic characters.
                                    </mat-error>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="mx-2">
                            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0" style="width: 225px;">
                                <mat-form-field appearance="outline" class="mat-form-field-fluid w-full">
                                    <mat-label>Customer Name</mat-label>
                                    <input appAlphabetOnly autocomplete="off" formControlName="CustomerName" matInput
                                           maxlength="100" placeholder="">
                                    <!--  <mat-error *ngIf="hasError('landName', 'required')">landName <strong>required</strong></mat-error>-->

                                </mat-form-field>
                            </div>
                        </div>
                        <div class="mx-2">
                            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0" style="width: 225px;">
                                <mat-form-field appearance="outline" class="mat-form-field-fluid w-full">
                                    <mat-label>Father Name</mat-label>
                                    <input appAlphabetOnly autocomplete="off" formControlName="FatherName" matInput
                                           maxlength="100" placeholder="">
                                    <!--  <mat-error *ngIf="hasError('landName', 'required')">landName <strong>required</strong></mat-error>-->
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="mx-2">
                            <div *ngIf="CustomerStatusLov" class="flex flex-shrink-0 items-center mt-6 sm:mt-0"
                                 style="width: 225px;">

                                <mat-form-field appearance="outline" class="mat-form-field-fluid w-full">
                                    <mat-label>Customer Status</mat-label>
                                    <mat-select formControlName="CustomerStatus">
                                        <mat-option>
                                            Select
                                        </mat-option>
                                        <mat-option *ngFor="let obj of CustomerStatusLov" [value]="obj.Value">
                                            {{obj.Name}}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>


                                <!--<mat-form-field class="mat-form-field-fluid" appearance="outline">
                              <mat-label>land Status</mat-label>
                              <input matInput formControlName="landStatus" placeholder="Enter land Status" maxlength="30" autocomplete="off">
                              <mat-error *ngIf="hasError('landStatus', 'required')">landStatus <strong>required</strong></mat-error>
                            </mat-form-field>-->
                            </div>

                        </div>
                        <div class="mx-2">
                            <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0" style="width: 225px;">
                                <button
                                    (click)="SearchDeceasedCustomer()"
                                    [disabled]="deceasedCustomerSearch.invalid" class=" mt-2 bg-gray-500 mat-focus-indicator mat-flat-button mat-button-base mat-primary mat-raised-button"
                                    color="primary">
                                    <mat-icon class="mr-2">search</mat-icon>
                                    Search
                                </button>
                            </div>
                        </div>
                        <!--    <div class="col-lg-3 col-sm-12">-->
                        <!--        <mat-form-field class="mat-form-field-fluid w-full" appearance="outline">-->
                        <!--            <mat-label>Branch</mat-label>-->
                        <!--            <input matInput value="{{Branch.Name}}" readonly="readonly" maxlength="30" autocomplete="off">-->
                        <!--            &lt;!&ndash;  <mat-error *ngIf="hasError('CustomerName', 'required')">CustomerName <strong>required</strong></mat-error>&ndash;&gt;-->
                        <!--        </mat-form-field>-->
                        <!--    </div>-->


                    </div>


                </div>
                <!-- <div class="row align-items-center mb-4">
                  <div class="col-lg-2 col-md-2">
                    <button [disabled]="deceasedCustomerSearch.invalid" color="primary" type="button" (click)="SearchDeceasedCustomer()" class="btn btn-secondary mt-19 kt-login__btn-primary btn-block" [ngClass]="{'kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light': loading}">
                      <span><i class="fa fa-search"> &nbsp;</i> Search</span>
                    </button>
                  </div>
                  </div> -->

                <!-- <div class="row align-items-center mb-4">
                  <div  class="col-lg-3 col-md-3"></div>
                  <div class="col-lg-9 col-md-9">
                    <div *ngIf="matTableLenght" class="mat-select" style="padding:0px 5px; font-size: 13px; margin-top:10px;">
                              <span class="font-bold text-green">Items per page:</span>

                      <mat-select display="inline" [(value)]="itemsPerPage" (valueChange)="paginate(1,$event)" style="width: 50px; margin-left: 15px; display: inline-block; margin-right: 10px;">
                        <mat-option [value]="5">5</mat-option>
                        <mat-option [value]="10">10</mat-option>
                        <mat-option [value]="25">25</mat-option>
                        <mat-option [value]="50">50</mat-option>
                      </mat-select>
                      <button (click)="paginate(1)">First</button>
                      <pagination-controls display="inline" (pageChange)="paginate($event)" style="display: inline-block;"></pagination-controls>
                      <button (click)="paginate(Math.ceil(totalItems/itemsPerPage))">Last</button>
                      <p style="float:right;">Total <b>{{totalItems}}</b> items</p>

                    </div>
                  </div>
                </div> -->
            </div>
        </div>
    </div>


    <!-- Search end -->
    <div [style.height]="gridHeight" class="mat-table__wrapper border shadow-xs rounded-sm bg-gray-50 overflow-scroll">

        <mat-table #sort1="matSort"
                   #table
                   [dataSource]="dataSource"
                   class="lmat-elevation-z8"
                   matSort
                   matSortActive="id"
                   matSortDirection="asc"
                   matSortDisableClear>
            <ng-container matColumnDef="customer_name">
                <mat-header-cell *matHeaderCellDef mat-sort-header="customer_name">Customer Name</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.CustomerName}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="father_name">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Father Name</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.FatherName}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="death_date">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Death Date</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.DeathDate}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="Cnic">
                <mat-header-cell *matHeaderCellDef mat-sort-header style="min-width: 150px;">CNIC</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer"
                          style="min-width: 150px;">{{DeceasedCustomer.Cnic}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="address">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.Address}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="per_address">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Permenent Address</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.PermanentAddress}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="branch_code">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Branch Code</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.BranchCode}}</mat-cell>
            </ng-container>

            <ng-container *ngIf="!isDialog" matColumnDef="StatusDesc">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.StatusDesc}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="certificate_verified">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Certificate Verified</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.IsCertificateVerified}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="legal_heir">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Legal Heir Income</mat-header-cell>
                <mat-cell *matCellDef="let DeceasedCustomer">{{DeceasedCustomer.LegalHeairHasIncome}}</mat-cell>
            </ng-container>


            <mat-header-row *matHeaderRowDef="displayedColumns;sticky:true;"
                            class="table-header-background"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

        </mat-table>
        <div *ngIf="!loading && dataSource.data.length==0" class="mat-table__message">No records found</div>
        <div *ngIf="loading" class="mat-table__message">Please wait....</div>
    </div>

    <div class="mat-table__bottom">
        <mat-spinner *ngIf="loading" [diameter]="20"></mat-spinner>
        <mat-paginator [length]="15" [pageSizeOptions]="[15, 30, 50, 100]" [pageSize]="15"
                       [showFirstLastButtons]="true"></mat-paginator>

        <!--<mat-spinner [diameter]="20" *ngIf="dataSource.loading$ | async"></mat-spinner>
        <mat-paginator [pageSize]="10" [pageSizeOptions]="[3, 5, 10]" [length]="dataSource.paginatorTotal$ | async" [showFirstLastButtons]="true"></mat-paginator>-->
    </div>


    <!-- <ngx-spinner bdColor="rgba(51,51,51,0.8)"
                 size="medium"
                 color="#ecbd00"
                 type="ball-scale-multiple">
        <p style="font-size: 20px; color: white">Loading...</p>
    </ngx-spinner> -->
</div>
